package br.com.cartao.principal;

import java.util.ArrayList;
import java.util.Comparator;
import java.util.List;
import java.util.Scanner;

import br.com.cartao.modelo.Cartao;
import br.com.cartao.modelo.Compras;

public class Principio {

	public static void main(String[] args) {
		int i = 1;
		String nome = "";
		double valor = 0;
		double limiteCartao = 0;
		boolean compraAutorizada = false;
		Scanner escaneador = new Scanner(System.in);	
		List<Compras> listagemCompras = new ArrayList<Compras>();
		
		
		System.out.println("Insira o valor do limite do cartão: ");
		limiteCartao = escaneador.nextDouble();
		
		
		while (i != 0){	
			Cartao card = new Cartao(limiteCartao);
			
			System.out.println("Insira o nome do produto que você irá comprar:");
			nome = escaneador.next();
			
			System.out.println("Insira o valor da compra:");
			valor = escaneador.nextDouble();
			
			Compras produto = new Compras(nome,valor);
			
			compraAutorizada = card.registraCompra(produto);
			
			if (compraAutorizada = true) {
				listagemCompras.add(produto);	
				System.out.println("\nCompra registrada com sucesso");
				listagemCompras.sort(Comparator.comparingDouble(Compras :: getValor));
			} else {
				System.out.println("\n!! Seu saldo é insuficiente !!");
			}
			
			System.out.println("Digite 1 para continuar e 2 para encerrar");
			i = escaneador.nextInt();
			
			
			for(Compras p :listagemCompras) {
				System.out.println(listagemCompras.toString());	
			}
			
			
			
		}
	
	escaneador.close();

	}

}
